# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

Stylus Builder Skill — a shell-script framework for scaffolding, validating, and deploying Arbitrum Stylus smart contracts (Rust compiled to WebAssembly). Designed for AI agents and developers following an "Actionable Skills" philosophy where each script performs a single action.

## Scripts (all in `scripts/`)

| Script | Purpose | Usage |
|---|---|---|
| `setup.sh` | Install Rust, `wasm32-unknown-unknown` target, `cargo-stylus` | `./scripts/setup.sh` |
| `scaffold.sh` | Create new Stylus project with Counter contract template | `./scripts/scaffold.sh <project_name>` |
| `check.sh` | Build & validate contract compiles to WASM | `./scripts/check.sh [project_path]` (default: `.`) |
| `deploy.sh` | Deploy WASM contract to Arbitrum chain | `./scripts/deploy.sh <private_key> [rpc_endpoint]` |

## Build & Check Commands

```bash
# Build a scaffolded project (from inside project dir)
cargo build --release --target wasm32-unknown-unknown

# Check via script (from repo root)
./scripts/check.sh <project_path>
```

There are no test suites or linting tools configured. Validation is done through successful WASM compilation.

## Architecture

This is a pure shell-script project (no package.json, Makefile, or CI). All scripts use `set -e` for fail-fast behavior.

**Scaffolded project structure** (generated by `scaffold.sh`):
- `Cargo.toml` — dependencies: `stylus-sdk 0.10.0`, `alloy-primitives =0.7.6`, `alloy-sol-types =0.7.6`, `mini-alloc 0.4.2`
- `src/lib.rs` — contract code (Counter example with `sol_storage!` macro, `#[entrypoint]`, `#[external]`)
- `.cargo/config.toml` — forces `wasm32-unknown-unknown` as default build target
- `Stylus.toml` — Stylus program metadata
- Release profile: `codegen-units = 1`, `strip = true`, `lto = true`, `panic = "abort"`, `opt-level = "s"`

## Key Constraints

- Contracts compile to `wasm32-unknown-unknown` — no `std` features relying on OS (I/O, threads, filesystem)
- Only WASM-compatible Rust crates can be used as dependencies
- Default deployment target is Arbitrum Sepolia testnet (`https://sepolia-rollup.arbitrum.io/rpc`)
- Deploying requires a private key with ETH for gas on the target chain
